subject re problem with adaptec b scsi and jumbo tape drive ron mastu ronaldm extro ucc su oz au wrote i ve just replac my exist dtc scsi control with an adaptec b and am now have troubl restor from a jumbo tape drive here s a document that i wrote some time back it s slightli out of date now that do ha been releas but much of it is still us darryl okahata internet darrylo sr hp com disclaim thi messag is the author s person opinion and doe not constitut the support opinion or polici of hewlett packard or of the littl green men that have been follow him all dai id adaptec txt darrylo rel darrylo hint and tip for the adaptec scsi adapt thi document contain hint and tip for get the adaptec scsi adapt to work with variou hardwar and softwar packag thei ar base upon my experi with an adaptec a control and will hopefulli help other howev note that i cannot guarante that the follow will realli help you it work for me and the inform in thi document could possibl caus you to lose some or all of your file on your hard disk import back up the entir content of your hard disk befor try anyth base upon inform in thi document copyright by darryl okahata thi document mai be freeli copi for person us onli and mai not be reprint in a for profit public without the consent of the author pleas note that i have no connect with adaptec other than as a custom topic cover in thi document window enhanc mode floppi control base tape backup devic sound card miscellan info pleas note that part of thi document contain technic and sometim ters descript of problem for refer adaptec technic support adaptec bb pleas send comment correct etc via email to me compuserv internet darrylo sr hp com window enhanc mode the window instal program should automat configur do and window for us with the adaptec howev just in case someth went wrong i m go to describ some of the chang need to get window work with the also you mai have notic that instal window make your pc run much slower even when you re not run window method of speed it up ar discuss in the section call window run slowli msdo configur the window instal program add the smartdriv disk cach to your config sy and autoexec bat file if you follow the instruct you ll notic that you ll need to us doubl buffer with smartdriv thi is the default setup you ll also notic that your system run much much slower in both window and msdo see the section call window run slowli for some wai of speed your system up window configur to get the adaptec to work with window make sure that the enh section of the system ini file contain the entri virtualhdirq off i believ that the window instal program automat add thi entri to system ini but i m not sure if thi doesn t work for you you might want to try ad some more line virtualhdirq off systemrombreakpoint fals emmexclud a cfff you probabl don t need the abov line though the systemrombreakpoint entri is us to enabl support for memori manag like qemm max onli need if you us such program window run slowli onc you do get window run with the chanc ar that your system is run much slower than befor if it s not it s probabl becaus you happen to be us aspi do sy version in your config sy file congratul thi appear to be a win solut you ar veri lucki whether your luck will hold out remain to be seen if your system is run much slower than befor thi is almost definit caus by smartdriv with doubl buffer accord to the window document and the microsoft technic note q smartdriv doubl buffer requir with aspi do sy you must us smartdriv with doubl buffer enabl while thi work it realli slow down your pc i onc estim that thi slow my pc down by a factor of five as i consid thi unaccept i look for other solut unfortun you cannot just disabl doubl buffer if you do window in enhanc mode will not work and you might even destroi the content of your hard disk by try to run window what you can do is on of the follow us other driver that provid doubl buffer it is my opinion that the unbeliev slow in smartdriv is caus either by horribl ineffici doubl buffer or by a bug in smartdriv us a driver that provid vd servic vd stand for virtual dma servic thi is a standard which is support by window that allow bu master disk control like the to work with window after trash my hard disk countless time i found the follow solut none of which requir us smartdriv note howev that i am now get occasion pariti error which ar probabl not caus by these solut but might be see below while the follow doe not requir smartdriv us some kind of disk cach util is strongli recommend as thi make window run much much faster if you do not have the aspi do sy driver or you do not need aspi function for control a cdrom tape drive more than two physic hard disk etc you can add the scsiha sy driver to your config sy file e g driver c scsiha sy v window need the v option thi driver must be load into low memori it cannot be load into high memori and it occupi about k as of novemb the scsiha sy driver could be obtain from the adaptec bb at hopefulli it s still there if you need aspi function and have the aspi do sy driver version or a you can us both the aspi do sy and scsiha sy driver in your config sy file e g driver c aspi do sy driver c scsiha sy v amazingli enough the scsiha sy driver can also be load high assum you have do i would have thought that thi would crash my system but it doesn t i ask adaptec s technic support about thi and thei said that load scsiha sy high should be fine as long as aspi do sy is load low on my system not us scsiha sy with aspi do a would occasion caus window to crash upon restart or exit window with the addit result of a corrupt disk some of my c window grp file would be corrupt for me these crash usual occur while make a differ program from progman ex the default window shell and vice versa thi is the reason scsiha sy mai be necessari i have absolut no idea if scsiha sy is necessari with version of aspi do earlier than note that mani peopl can us aspi do or a without scsiha sy thei do not seem to have ani problem at all i consid these peopl lucki other like me have had all sort of problem in my opinion the best but not necessarili the easiest solut is to upgrad to aspi do the scsiha sy driver is no longer need unfortun while you could get previou aspi do upgrad from the adaptec bb the aspi do driver is not avail from the adaptec bb as far as i know there ar onli three wai to get a copi you can bui the new as of novemb adaptec ez scsi driver kit which supposedli includ aspi do as well as other driver such as cdrom driver i believ the list price is around if you alreadi have a copi of an older version of aspi do you can supposedli contact adaptec to upgrad it to ez scsi for around a copi of aspi do is includ in central point pc tool for msdo note that the document and driver ar store in differ directori note further that onli aspi do is includ the cdrom driver and driver to support more than two hard disk ar not includ thi is where i obtain my copi of aspi do note howev that i am now get occasion pariti error with window in all probabl defect hardwar in my pc is caus thi as i upgrad my motherboard just after i found the abov solut howev becaus these pariti error occur onli dure disk access there is a veri small but definit possibl that the pariti error ar driver relat for exampl chang the bu on off time for certain disk transfer might caus thi i ve run variou memori test for hour at a time and these test have found no problem thi problem is probabl caus by memori with margin time requir which caus pariti error dure disk transfer thi is why the memori test didn t find ani problem the problem show up onli under disk i o howev i m mention thi just in case it isn t a hardwar problem floppi control base tape backup devic there ar two possibl problem with us the adaptec with a floppi control base tape backup devic such as the colorado memori system jumbo tape backup restor can take a veri long time the tape drive constantli start stop start stop etc tape oper mai be errat or encount too mani tape error thi problem might be caus by defect hardwar on my howev i ve heard of other peopl have similar problem and so i m mention thi just in case it is not a hardwar problem on my tape backup restor take a long time if you have a floppi control base tape backup devic you mai have to adjust the adaptec bu on off time for best result when us the tape drive normal while do a tape backup or restor the tape drive motor should be continu run with onli an occasion paus howev the default bu time on the adaptec mai caus the tape drive motor to start and stop start and stop everi few second thi caus needless wear to the tape and tape drive howev note that a dirti tape head or a defect tape drive can also caus thi make sure your tape head ar clean thi also caus the tape backup or restor to take much much longer than necessari the problem here is that these tape backup us the floppi dma to transfer data in memori to from the tape drive and the adaptec us dma to transfer data in memori to from the hard disk the floppi dma need to feed data to the tape drive at a certain rate if the tape drive is not fed data quickli enough by the floppi dma the tape drive stop rewind a bit and restart onc enough data is eventu fed to it the default bu time on the adaptec which is realli dma time is too larg for exampl when a backup is done data ha to be transfer from a hard disk to memori and then from memori to the tape becaus the default time on the adaptec hog the memori too much too much time is spent transfer data from a hard disk to memori not enough time is spent transfer data from memori to the tape drive as a result the tape drive constantli start and stop becaus data is not fed to it quickli enough the solut is to chang the adaptec s bu on off time the default factori set is microsecond on and microsecond off the bu on time need to be lower to microsecond thi can be done in on of two wai if you have aspi do you can us the n option for exampl i us a bu on time of microsecond which mean that i us the follow line in my config sy file devic c aspi do sy n note that there is no space between the n and the if you don t have aspi do your onli recours is to try to find a program call setscsi ex which is veri difficult to find the reason is that adaptec for reason of their own doe not seem to want thi wide distribut i onc ask someon who work for adaptec and thei ask me to not upload it anywher if you have anonym ftp access to the internet you could try us archi to hunt down a copi i believ that there ar a coupl of site that have it if you do find a copi you run it like so setscsi n thi adjust the bu on time to microsecond run setscsi ex without ani argument reset the bu time back to the factori default note that it seem that you cannot us setscsi ex if you us aspi do setscsi ex crash my system if aspi do wa load i could us setscsi ex with scsiha sy howev do not lower the bu on time below microsecond or increas it abov microsecond if you lower it too low the hard disk throughput will suddenli drop your system will feel slower for me microsecond work fine thi valu mai work fine for you or you mai have to adjust it downward a littl onc you ve lower the bu on time tape backup and restor should run faster also do not experi with the bu on off time with the other option that i have intention not describ unless you know what you ar do bad combin can caus pariti error and wors by starv memori refresh a program call bustifix ex exist on the adaptec bb unless thi ha been upgrad sinc i last check which ha been a while thi is a self extract archiv contain a batch file and a coupl of other file thi batch file wa suppos to allow on to set the bu on off time for the and other howev when i tri run thi program with my a my system crash at the time i wa run scsiha sy and i didn t check to see if there wa a conflict with it mayb thi old program work onli with the b although the doc sai that it work with the a errat tape oper or too mani tape error thi problem mai or mai not exist although it exist on my system a hardwar problem just on my particular could caus it howev i ve heard of other peopl have similar problem and so i m mention thi just in case it isn t a hardwar problem just on my symptom of thi problem which persist even after clean the tape head back up to tape encount unus sector detect error result in an abort tape backup tape backup work but the tape compar fail the tape drive start stop start stop etc much too often unlik the abov mention problem tape backup restor take a long time where the tape drive start and stop everi few second thi kind of start stop occur everi few second or so fastback plu doe not find see ani tape backup devic other program like central point backup and the cm jumbo softwar assum that you have a cm jumbo tape drive can find see the tape drive but fastback plu cannot too mani tape read error although i do not know what is caus thi problem i discov that us a differ floppi control solv it a few month ago i upgrad my motherboard which contain an integr floppi control as i alreadi had a floppi control on the i initi disabl the motherboard floppi control after a while i decid to try disabl the floppi control and us the on on the motherboard when i did thi the tape drive a cm jumbo reliabl increas dramat and fastback plu wa suddenli abl to find and us the tape drive i don t know if thi wa caus by a hardwar problem on my on the on hand the floppi drive work great when thei were attach to the which seem to sai that there wa noth wrong with the on the other hand the tape drive didn t work well attach to the floppi control but it did work when attach to a differ control thi could be an indic of a hardwar problem on my i did chang floppi drive cabl and so it is conceiv that the problem wa in the cabl i don t know what the caus realli is howev if you re have similar problem you might want to consid try a new floppi control sound card mani popular sound card can plai or record digit sound and thi is typic done us dma like the tape drive dma the adaptec s dma can conflict with the sound card dma unlik that of the tape dma thi conflict usual manifest itself as a pariti error your system crash with a pariti error messag what happen is that data is be transfer so quickli by the sound card and the adaptec memori refresh cannot occur quickli enough which caus a pariti error usual get a pariti error mean that there is a hardwar problem with your system in thi case howev the pariti error is not a symptom of bad hardwar i ve found that such pariti error typic occur while record digit sound and the chanc of such error increas as you increas the record fidel e g higher sampl rate record in stereo record us bit instead of etc like the tape drive solut the solut here is to lower the adaptec s bu on time see the section on tape drive for inform on how thi is done note howev that thi mai or mai not solv the problem it mai onli reduc the probabl of a pariti error the softwar us to record digit sound can greatli affect thi problem i e some softwar is ineffici disk cach the speed of your hard disk and the amount of disk fragment can also affect thi miscellan info thi section contain miscellan hint tip and rumor much of it is mere inform that i ve heard or read about and have not verifi i believ that the follow inform is correct but i m not sure us it at your own risk with qemm and you need to specifi the db paramet e g db unless you ar us the aspi do driver if you don t qemm will crash hang at bootup although the qemm manual mention thi the instal program doe not seem to detect that a is present and automat add thi option to the qemm command line at least thi occur with the qemm instal program i haven t test ani other version earlier version of qemm probabl need thi paramet but i m not sure i ve never us a version earlier than if you us aspi do you do not need to give qemm the db paramet some or all version of the do not support hard disk over on gigabyt in size to support hard disk with capac over gb you need to get a new rom bio from adaptec i m not sure if thi is still true of the latest bs be sold by adaptec to connect a cdrom drive to the you need a scsi cdrom drive and some driver note that some cdrom drive have proprietari interfac non scsi these drive cannot be us with the you have three choic for cdrom driver i have no idea how well the follow solut work or even if thei work the follow is secondhand inform you can bui adaptec s ez scsi driver packag which list for someth like if you alreadi have older adaptec driver you can supposedli upgrad to ez scsi for around contact adaptec for detail the ez scsi packag supposedli contain everyth that you need you can bui the corelscsi driver packag which is made by the same peopl that make coreldraw thi packag contain cdrom driver scsi tape driver worm driver etc i do not know the list price but i ve seen thi packag sold for around note that corelscsi doe not come with the aspi do driver which is need if you do not alreadi have aspi do you mai be better off get adaptec s ez scsi instead thi method is obsolet as the follow driver have been obsolet by adaptec s ez scsi kit but i m mention it in case someon alreadi ha these driver you can us the driver in the adaptec asw kit aspi do and the asw kit aspi cdrom driver you will have to get a copi of mscdex ex a high level cdrom driver if it is not includ in the asw kit but thi is avail from sever bulletin board to us a scsi tape drive with the you need softwar that know how to talk to a scsi tape drive softwar that i ve heard about ar again like the abov section on cdrom drive i have no idea how well the follow solut work or even if thei work the follow is secondhand inform central point pc tool for msdo supposedli support a larg number of scsi tape drive it come with scsi driver aspi do as well as central point backup the corelscsi driver packag contain a scsi tape backup program see the abov section on cdrom drive for more detail howev note that corelscsi doe not come with but requir aspi do i ve seen advertis that sell the in three configur scsi control with hard disk rom bio scsi control w bio and adaptec aspi driver scsi control w bio adaptec aspi driver and corelscsi driver program i imagin that adaptec now sell the in a fourth configur scsi control w bio and ez scsi driver includ aspi driver those peopl who us unix might be interest in a version of gnu tar for msdo that talk to a scsi tape drive via the aspi do driver you need thi driver befor you can us thi program i ve never us thi version of gnu tar but i ve heard that it work i don t know how well though if you have anonym ftp access to the internet a copi can be found on wsmr simtel armi mil and mirror site pd msdo dskutl aspibin zip gnu tar for scsi tape drive adaptec xx aspipat zip patch for aspibin rel to gnu tar aspisrc zip src for gnu tar for scsi tape adaptec ctrlr i have no idea if a copi can be found on compuserv unixforum might have it if ani forum doe as far as msdo is concern the a and the b control ar the same with msdo the a should work as well as the b howev the hardwar for these two board is not ident and there is at least on non msdo program that initi did not work with a a but did work with a b bsd a version of bsd unix in case anyon s curiou here s an edit copi of my config sy file file buffer break on stack devic c sy dev aspi do sy d n devic c qemm qemm sy on ram rom dma st m x f ffff do high umb devicehigh c sy dev nnansi sy devicehigh c do setver ex shell c do command com p note that i m us qemm and aspi do if i were us aspi do or a i d probabl have to us a config sy that look like file buffer break on stack devic c sy dev aspi do sy d n devic c qemm qemm sy on ram rom dma st m x f ffff do high umb devicehigh c sy dev scsiha sy v devicehigh c sy dev nnansi sy devicehigh c do setver ex shell c do command com p if i weren t us aspi do i d probabl us someth that look like file buffer break on stack devic c sy dev scsiha sy v devic c qemm qemm sy on ram rom db dma st m x f ffff do high umb devicehigh c sy dev nnansi sy devicehigh c do setver ex shell c do command com p howev if i us a floppi control base tape drive or if i plan to record high qualiti sound from a sound card i would still need some wai of chang the adaptec s bu on off time the first two version of config sy take care of thi but thi last version doesn t local variabl fill column eval auto fill mode nil end 